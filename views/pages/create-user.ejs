<h2>Crie seu perfil</h2>

<form>
  <label for="name">Nome:</label>
  <input type="text" id="name" name="name" required>

  <input type="submit" value="Criar">
</form>

<script>
  document.querySelector('form').addEventListener('submit', (event) => {
    event.preventDefault();

    const userName = document.querySelector('#name').value;

    // Não use FormData aqui
    // Crie um objeto simples com os dados
    const userData = { name: userName };

    fetch('/api/users/create', { // Verifique se a URL está correta (/users/create ou /users/users/create)
      method: 'POST',
      headers: {
        'Content-Type': 'application/json' // Defina o Content-Type como JSON
      },
      body: JSON.stringify(userData) // Envie o objeto como string JSON
    }).then(response => {
      if (response.ok) {
        window.location.href = '/home';
      } else {
        // Tente obter mais detalhes do erro do backend
        response.text().then(text => {
          throw new Error('Erro ao criar usuário: ' + response.statusText + ' - ' + text);
        });
      }
    }).catch(error => {
      console.error(error);
    });
  })

</script>